{"version":3,"file":"article.bundle.js","mappings":"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","sources":["webpack://blog/./src/assets/javascripts/article.js"],"sourcesContent":["const articlesContainer = document.querySelector(\".articles-container\");\r\nconst fetchArticles = async () => {\r\n  try {\r\n    const response = await fetch(\"https://restapi.fr/api/articleOdilon\");\r\n    if (response.ok) {\r\n      let data = await response.json();\r\n      createArticle(data);\r\n    }\r\n  } catch (e) {\r\n    console.log(\"erreur :\", e);\r\n  }\r\n};\r\nfetchArticles();\r\n\r\nconst createArticle = (data) => {\r\n  /*on vide le container d'articles avant d'inserer de nouveau articles\r\n   afin d'eviter que les articles se repeter*/\r\n  articlesContainer.innerHTML = \"\";\r\n\r\n  if (data._id !== undefined) {\r\n    const article = document.createElement(\"div\");\r\n    article.classList.add(\"article\");\r\n    article.innerHTML = ` \r\n            <img\r\n                src=${data.image || data.img}\r\n                alt=\"profil\"\r\n            />\r\n            <h2>${data.title}</h2>\r\n            <p class=\"article-author\">\r\n                ${data.author} - ${data.category}\r\n            </p>\r\n            <p class=\"article-content\">\r\n            ${data.content}\r\n            </p>\r\n            <div class=\"article-action\">\r\n                <button class=\"btn btn-primary\">\r\n                    Modifier\r\n                </button>\r\n                <button class=\"btn btn-danger\" \r\n                  data-id=${data._id}>\r\n                    Supprimer\r\n                </button>\r\n            </div>\r\n            `;\r\n    articlesContainer.append(article);\r\n  } else if (data.length !== 0) {\r\n    const tabArticles = data.map((element) => {\r\n      const article = document.createElement(\"div\");\r\n      article.classList.add(\"article\");\r\n      article.innerHTML = `  \r\n            <img\r\n              src=${element.image}\r\n              alt=\"profil\"\r\n            />\r\n            <h2>${element.title}</h2>\r\n            <p class=\"article-author\">\r\n                ${element.author} - ${element.category}\r\n            </p>\r\n            <p class=\"article-content\">\r\n            ${element.content}\r\n            </p>\r\n            <div class=\"article-action\">\r\n              <button class=\"btn btn-primary\">Modifier</button\r\n              ><button class=\"btn btn-danger\" data-id=${element._id}>Supprimer</button>\r\n            </div>\r\n\r\n            `;\r\n      return article;\r\n    });\r\n\r\n    tabArticles.forEach((element) => {\r\n      console.log(element);\r\n    });\r\n    articlesContainer.append(...tabArticles);\r\n  }\r\n\r\n  const btnDanger = articlesContainer.querySelectorAll(\".btn-danger\");\r\n  btnDanger.forEach((element) => {\r\n    element.addEventListener(\"click\", async (event) => {\r\n      const id = event.target.dataset.id;\r\n      console.log(\"id :\", id);\r\n      try {\r\n        const response = await fetch(\r\n          `https://restapi.fr/api/articleOdilon/${id}`,\r\n          {\r\n            method: \"DELETE\",\r\n          }\r\n        );\r\n        console.log(\"response :\", response.ok);\r\n        if (response.ok) {\r\n          fetchArticles();\r\n        }\r\n      } catch (e) {\r\n        console.log(e);\r\n      }\r\n    });\r\n  });\r\n};\r\n"],"names":["articlesContainer","document","querySelector","fetchArticles","response","fetch","ok","data","json","createArticle","e","console","log","innerHTML","_id","undefined","article","createElement","classList","add","image","img","title","author","category","content","append","length","tabArticles","map","element","forEach","btnDanger","querySelectorAll","addEventListener","event","id","target","dataset","method"],"sourceRoot":""}